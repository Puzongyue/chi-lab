# 第三阶段影院管理系统（CCS）用例文档

by：nju_random_committee

## 文档修改历史

| 修改人员 | 日期       | 修改原因                         | 版本号 |
| :------: | ---------- | -------------------------------- | ------ |
| 全组人员 | 2019.06.02 | 完成各自用例对应的文档           | V1.0   |
|   倪雯   | 2019.06.19 | 增加用例图、系统状态图、概念类图 | V2.0   |




[TOC]

## 1.引言

本文档描述了影院系统的用户需求。分为观众和影院管理员两个参与者。

## 2.用例图


![Vx3a90.png](https://s2.ax1x.com/2019/06/20/Vx3a90.png)



## 3.用例列表

### 3.1 影院管理员

1. 发布会员卡
2. 修改会员卡优惠策略
3. 新增退票策略
4. 修改退票策略
5. 影厅信息录入
6. 修改影厅信息
7. 修改影院角色
8. 赠送优惠券		

### 3.2 观众

1. 用户退票
2. 查看历史充值记录
3. 查看历史消费记录

## 4.详细用例描述

### 4.1 影院管理员

#### 4.1.1 发布会员卡

- 用例编号：CM24

- 名称：发布会员卡

- 创建者：倪雯

- 创建日期：2019.05.25

- 最后一次更新者：

- 更新日期：

- 参与者 ：影院管理员

- 触发条件：

- 前置条件：

  ​         影院管理员选择发布会员卡充值优惠策略

- 后置条件： 

  ​      系统记录优惠策略

- 优先级：3

- 正常流程：

  1. 影院管理员点击发布会员卡按钮
  2. 填写优惠电影范围，获取优惠条件，优惠策略
  3. 管理员发布后，系统更新

- 扩展流程：

  1. 若管理员未填写优惠电影范围，获取优惠条件，优惠策略：

     ​           系统不允许发布，返回错误

- 特殊需求：

  无





#### 4.1.2 修改会员卡优惠策略

- 用例编号：CM25

- 名称：修改会员卡优惠策略

- 创建者：倪雯

- 创建日期：2019.05.25

- 最后一次更新者：

- 更新日期：

- 参与者 ：影院管理员

- 触发条件：影院管理员选择修改会员卡优惠策略

- 前置条件：

  已有会员卡优惠策略

- 后置条件： 

  ​      系统更新会员卡优惠策略

- 优先级：3

- 正常流程：

  1. 影院管理员选中要修改的优惠策略
  2. 修改策略
  3. 发布

- 扩展流程：

  ​    1.若管理员未填写优惠电影范围，获取优惠条件，优惠策略：

  ​           系统不允许发布，返回错误

- 特殊需求：

  无



#### 4.1.3 新增退票策略

- 用例编号：CM26

- 名称： 新增退票策略

- 创建者：倪雯

- 创建日期：2019.05.25

- 最后一次更新者：

- 更新日期：

- 参与者 ：影院管理员

- 触发条件：影院管理员选择新增退票策略

- 前置条件：

  ​        无

- 后置条件： 

  ​      当用户发起退票时系统根据策略来处理

- 优先级：3

- 正常流程：

  1. 管理员选择新增退票策略
  2. 管理员填写具体退票策略
  3. 上架新增退票策略

- 扩展流程：

  ​    无

- 特殊需求：

  无

  #### 

#### 4.1.4 修改退票策略

- 用例编号：CM27

- 名称：修改退票策略

- 创建者：倪雯

- 创建日期：2019.05.25

- 最后一次更新者：

- 更新日期：

- 参与者 ：影院管理员

- 触发条件：管理员选择修改现有的退票策略

- 前置条件：

  ​       已有退票策略

- 后置条件： 

  ​      系统更新退票策略

- 优先级：3

- 正常流程：

  1. 管理员选中要修改的退票策略
  2. 管理员更改退票策略
  3. 上架新的退票策略

- 扩展流程：

  ​    无

- 特殊需求：

  无

#### 4.1.5 影厅信息录入

- 用例编号：CM28

- 名称 ：影厅信息录入

- 创建者：勇中坚

- 创建日期：2019.05.25

- 最后一次更新者：

- 更新日期：

- 参与者 ：影院管理员，目标是录入影厅信息。

- 触发条件：

- 前置条件：用户已登录

- 后置条件：

  1. 增加新的影厅信息

- 优先级：高

- 正常流程：

  1. 用户请求添加影厅信息
  2. 用户输入影厅信息
  3. 系统提示添加成功

- 扩展流程：

  无

- 特殊需求：

  无

#### 4.1.6 修改影厅信息

- 用例编号：CM29

- 名称 ：修改影厅信息

- 创建者：勇中坚

- 创建日期：2019.05.25

- 最后一次更新者：

- 更新日期：

- 参与者 ：影院管理员，目标是修改影厅信息。

- 触发条件：

- 前置条件：用户已登录

- 后置条件：

  1. 修改原有影厅信息

- 优先级：高

- 正常流程：

  1. 用户请求添修改硬厅信息
  2. 用户选择要修改的影厅信息
  3. 用户输入修改后的影厅信息
  4. 系统提示添加成功

- 扩展流程：

  无

- 特殊需求：

  无

#### 4.1.7 修改影院角色

- 用例编号：CM30

- 名称：修改影院角色

- 创建者：勇中坚

- 创建日期：2019.05.25

- 最后一次更新者：

- 更新日期：

- 参与者 ：影院管理员，目标是修改影院角色

- 触发条件：影院管理员点击修改影院角色

- 前置条件：

  1. 影院管理员已完成身份认证

- 后置条件：

  1. 修改影院角色信息

- 优先级：高

- 正常流程：

  1. 用户请求修改影院角色
  2. 系统显示可修改的角色列表
  3. 用户选择要修改的角色
  4. 用户输入新的信息
  5. 用户完成确认验证
  6. 系统提示修改成功

- 扩展流程：

  2-5a. 用户选择取消，结束流程

- 特殊需求：

  无

#### 4.1.8 赠送优惠券

- 用例编号：CM34

- 名称：赠送优惠券

- 创建者：王雪君

- 创建日期：2019.05.25

- 最后一次更新者：

- 更新日期：

- 参与者 ：影院管理员，目标是给达到条件的部分会员赠送优惠券。

- 触发条件：

- 前置条件：

  1. 已有优惠券
  2. 已有会员

- 后置条件：

  1. 被选中的会员得到指定优惠券

- 优先级：高

- 正常流程：

  1. 管理员输入查询条件
  2. 系统按条件显示消费达到一定金额的会员名单
  3. 管理员查询优惠券
  4. 系统显示符合条件的优惠券列表
  5. 管理员选择要赠送的优惠券和赠送对象，点击确定
  6. 系统给被选中用户添加优惠券。

- 扩展流程：

  ​	1.a：查询条件为：会员消费金额。

  ​	3.a：优惠券条件为：时间区间、优惠电影、优惠策略。

  ​	5.a：被赠送用户可为部分或全部

- 特殊需求：

  无

### 4.2 观众

#### 4.2.1 用户退票

- 用例编号：AC31

- 名称：退票

- 创建者：王雪君

- 创建日期：2019.05.25

- 最后一次更新者：

- 更新日期：

- 参与者 ：观众，目标是当订单已支付并未出票时，在线退票

- 触发条件：观众点击订单列“退票”链接

- 前置条件：

  1. 该订单电影未开始播放
  2. 该订单已支付并未出票

- 后置条件：

  1. 系统取消对座位的锁定
  2. 该订单状态变为：已退票
  3. 系统将退还金额返还给观众。

- 优先级：高

- 正常流程：

  1. 系统显示该观众的订单列表。
  2. 观众选择希望退票的订单。
  3. 系统显示根据退票策略的退票详情（包括：退还金额、退票策略）及提示：您是否确定退票。
  4. 观众点击“确定”，系统将退还金额返回客户付款方式的账户，显示：退票成功。

- 扩展流程：

  ​	3.a：按照退票规则不能退票时，显示：对不起，根据“xx”规则，无法退掉本票。

  ​	4.a：用户点击“取消”，系统返回订单列表。

- 特殊需求：

  无

#### 4.2.2 查看历史充值记录

- 用例编号：AC32

- 名称：查看历史充值记录

- 创建者：栾昀鹏

- 创建日期：2019.05.25

- 最后一次更新者：栾昀鹏

- 更新日期：2019.05.25

- 参与者：观众

- 触发条件：观众想要查看自己的历史充值记录。

- 前置条件：无

- 后置条件：显示观众的历史充值记录。

- 优先级：高

- 正常流程：

  1. 观众查看充值记录。
  2. 系统展示用户充值记录。
  3. 用户选择某一项充值记录查看详情。
  4. 系统显示详情。

- 扩展流程：

  2a.若用户没有历史充值记录，系统提示还没有充值记录。

- 特殊需求：无



#### 4.2.3 查看历史消费记录

- 用例编号：AC33

- 名称：查看历史消费记录

- 创建者：栾昀鹏

- 创建日期：2019.05.25

- 最后一次更新者：栾昀鹏

- 更新日期：2019.05.25

- 参与者：观众

- 触发条件：观众想要查看历史消费记录。

- 前置条件：无

- 后置条件：显示观众购买电影票的记录。

- 优先级：高

- 正常流程：

  1. 观众查看消费记录。
  2. 系统显示观众的消费记录。
  3. 用户选择某一项消费记录查看详情。
  4. 系统显示消费记录详情。

- 扩展流程：

  2a.若用户没有已购的电影票，系统提示还没有历史消费记录。

- 特殊需求：无



## 5.需求分析模型

### 5.1 系统顺序图

#### 5.1.1 影院管理员

#####      5.1.1.1 发布会员卡

  ![](<https://github.com/xiachongyu/-/raw/master/%E5%8F%91%E5%B8%83%E4%BC%9A%E5%91%98%E5%8D%A1%E7%B3%BB%E7%BB%9F.jpg>)



##### 5.1.1.2 修改会员卡

![](<https://github.com/xiachongyu/-/raw/master/%E4%BF%AE%E6%94%B9%E4%BC%9A%E5%91%98%E5%8D%A1.jpg>)

##### 5.1.1.3 发布退票策略

![](<https://github.com/xiachongyu/-/raw/master/%E9%80%80%E7%A5%A8%E9%A1%BA%E5%BA%8F.jpg>)







##### 5.1.1.4 修改退票策略

![](<https://github.com/xiachongyu/-/raw/master/%E4%BF%AE%E6%94%B9%E9%80%80%E7%A5%A8%E9%A1%BA%E5%BA%8F.jpg>)

##### 5.1.1.5 影厅信息录入

![ImageText](https://github.com/Tdycwym/ImageFolder/raw/master/5221.jpg)

##### 5.1.1.6 修改影厅信息

![ImageText](https://github.com/Tdycwym/ImageFolder/raw/master/5222.jpg)

##### 5.1.1.7 修改影院角色

![ImageText](https://github.com/Tdycwym/ImageFolder/raw/master/5223.jpg)



##### 5.1.1.8 赠送优惠券

![èµ éä¼æ å¸.jpg](https://github.com/SnowfungusWang/ruangonger_cinema/blob/master/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/%E8%B5%A0%E9%80%81%E4%BC%98%E6%83%A0%E5%88%B8.jpg?raw=true)

#### 5.1.2 观众

##### 5.1.2.1 退票

![ç¨æ·éç¥¨.jpg](https://github.com/SnowfungusWang/ruangonger_cinema/blob/master/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/%E7%94%A8%E6%88%B7%E9%80%80%E7%A5%A8.jpg?raw=true)


##### 5.1.2.2 查看历史充值记录

![](https://raw.githubusercontent.com/171250626/se2_teamwork/master/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE%EF%BC%88%E8%A7%81%E5%8D%8F%E4%BD%9C%E7%BD%91%E7%AB%99%EF%BC%89/5%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E5%85%85%E5%80%BC%E8%AE%B0%E5%BD%95.png)

##### 5.1.2.3 查看历史消费记录

![](https://raw.githubusercontent.com/171250626/se2_teamwork/master/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE%EF%BC%88%E8%A7%81%E5%8D%8F%E4%BD%9C%E7%BD%91%E7%AB%99%EF%BC%89/6%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E6%B6%88%E8%B4%B9%E8%AE%B0%E5%BD%95.png)


### 5.2 概念类图

#### 5.2.1 系统概念类图

[![Vx3P1K.png](https://s2.ax1x.com/2019/06/20/Vx3P1K.png)](https://imgchr.com/i/Vx3P1K)

#### 5.2.2 影院管理员

##### 5.2.2.1 发布会员卡

  ![](<https://github.com/xiachongyu/-/raw/master/%E7%B3%BB%E7%BB%9F%E5%8F%91%E5%B8%83.jpg>)



##### 5.2.2.2 修改会员卡

![](<https://github.com/xiachongyu/-/raw/master/%E6%9B%B4%E6%96%B0%E7%B3%BB%E7%BB%9F.jpg>)

##### 5.2.2.3 发布退票策略

![](<https://github.com/xiachongyu/-/raw/master/%E7%B1%BB%E9%80%80%E7%A5%A8%E6%96%B0%E5%A2%9E.jpg>)







##### 5.2.2.4 修改退票策略

![](<https://github.com/xiachongyu/-/raw/master/%E9%80%80%E7%A5%A8%E4%BF%AE%E6%94%B9%E7%B1%BB.jpg>)

##### 5.2.2.5 影厅信息录入

![ImageText](https://github.com/Tdycwym/ImageFolder/raw/master/YTXXLR.jpg)

##### 5.2.2.6 修改影厅信息

![ImageText](https://github.com/Tdycwym/ImageFolder/raw/master/XGYTXX.jpg)

##### 5.2.2.7 修改影院角色

![ImageText](https://github.com/Tdycwym/ImageFolder/raw/master/XGYYJS.jpg)


##### 5.2.2.8 赠送优惠券

![èµ éä¼æ å¸.jpg](https://github.com/SnowfungusWang/ruangonger_cinema/blob/master/%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE/%E8%B5%A0%E9%80%81%E4%BC%98%E6%83%A0%E5%88%B8.jpg?raw=true)
#### 5.2.3 观众

##### 5.2.3.1 退票



![éç¥¨.jpg](https://github.com/SnowfungusWang/ruangonger_cinema/blob/master/%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE/%E9%80%80%E7%A5%A8.jpg?raw=true)


##### 5.2.3.2 查看历史充值记录 

![](https://raw.githubusercontent.com/171250626/se2_teamwork/master/%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE%EF%BC%88%E8%A7%81253%E7%9A%84%E5%8D%8F%E4%BD%9C%E7%BD%91%E7%AB%99%EF%BC%89/5%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E5%85%85%E5%80%BC%E8%AE%B0%E5%BD%95.png)

##### 5.2.3.3 查看历史消费记录  

![](https://raw.githubusercontent.com/171250626/se2_teamwork/master/%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE%EF%BC%88%E8%A7%81253%E7%9A%84%E5%8D%8F%E4%BD%9C%E7%BD%91%E7%AB%99%EF%BC%89/6%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E6%B6%88%E8%B4%B9%E8%AE%B0%E5%BD%95.png)


### 5.3 状态图

#### 5.3.1 系统状态图

![Vx3wcT.png](https://s2.ax1x.com/2019/06/20/Vx3wcT.png)



#### 5.3.2 影院管理员

##### 5.3.2.1 发布会员卡

  ![](<https://github.com/xiachongyu/-/raw/master/%E7%8A%B6%E6%80%81%E5%8F%91%E5%B8%83.jpg>)



##### 5.3.2.2 修改会员卡

![](<https://github.com/xiachongyu/-/raw/master/%E4%BF%AE%E6%94%B9%E7%8A%B6%E6%80%81.jpg>)

##### 5.3.2.3 发布退票策略

![](<https://github.com/xiachongyu/-/raw/master/%E9%80%80%E7%A5%A8%E6%96%B0%E5%A2%9E%E7%8A%B6%E6%80%81.jpg>)







##### 5.3.2.4 修改退票策略

![](<https://github.com/xiachongyu/-/raw/master/%E4%BF%AE%E6%94%B9%E9%80%80%E7%A5%A8%E7%AD%96%E7%95%A5%E7%8A%B6%E6%80%81.jpg>)

##### 5.3.2.5 影厅信息录入

![ImageText](https://github.com/Tdycwym/ImageFolder/raw/master/GaroashHellscream.jpg)

##### 5.3.2.6 修改影厅信息

![ImageText](https://github.com/Tdycwym/ImageFolder/raw/master/GromashHellscream.jpg)

##### 5.3.2.7 修改影院角色

![ImageText](https://github.com/Tdycwym/ImageFolder/raw/master/RadeBlackhand.jpg)

##### 5.3.2.8 赠送优惠券

![èµ éä¼æ å¸.jpg](https://github.com/SnowfungusWang/ruangonger_cinema/blob/master/%E7%8A%B6%E6%80%81%E5%9B%BE/%E8%B5%A0%E9%80%81%E4%BC%98%E6%83%A0%E5%88%B8.jpg?raw=true)

#### 5.3.3观众

##### 5.3.3.1 退票

![éç¥¨.jpg](https://github.com/SnowfungusWang/ruangonger_cinema/blob/master/%E7%8A%B6%E6%80%81%E5%9B%BE/%E9%80%80%E7%A5%A8.jpg?raw=true)

##### 5.3.3.2 查看历史充值记录   

![](https://raw.githubusercontent.com/171250626/se2_teamwork/master/%E7%8A%B6%E6%80%81%E5%9B%BE/5%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E5%85%85%E5%80%BC%E8%AE%B0%E5%BD%95.png)

##### 5.3.3.3 查看历史消费记录   

![](https://raw.githubusercontent.com/171250626/se2_teamwork/master/%E7%8A%B6%E6%80%81%E5%9B%BE/6%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E6%B6%88%E8%B4%B9%E8%AE%B0%E5%BD%95.png)